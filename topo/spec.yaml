nodes:
- name: Blue-A
  image: sabaniki/frr:latest
  interfaces:
  - { name: blue-b, type: direct, args: Blue-B#blue-a }
  - { name: blue-c, type: direct, args: Blue-C#blue-a }
  sysctls:
  - sysctl: net.ipv6.conf.all.disable_ipv6=0
  - sysctl: net.ipv6.conf.all.forwarding=1
- name: Blue-B
  image: sabaniki/frr:latest
  interfaces:
  - { name: blue-a, type: direct, args: Blue-A#blue-b }
  - { name: blue-c, type: direct, args: Blue-C#blue-b }
  sysctls:
  - sysctl: net.ipv6.conf.all.disable_ipv6=0
  - sysctl: net.ipv6.conf.all.forwarding=1
- name: Blue-C
  image: sabaniki/frr:latest
  interfaces:
  - { name: blue-b, type: direct, args: Blue-B#blue-c }
  - { name: blue-a, type: direct, args: Blue-A#blue-c }
  sysctls:
  - sysctl: net.ipv6.conf.all.disable_ipv6=0
  - sysctl: net.ipv6.conf.all.forwarding=1

- name: Green-A
  image: sabaniki/frr:latest
  interfaces:
  - { name: green-b, type: direct, args: Green-B#green-a }
  - { name: green-c, type: direct, args: Green-C#green-a }
  sysctls:
  - sysctl: net.ipv6.conf.all.disable_ipv6=0
  - sysctl: net.ipv6.conf.all.forwarding=1
- name: Green-B
  image: sabaniki/frr:latest
  interfaces:
  - { name: green-a, type: direct, args: Green-A#green-b }
  - { name: green-c, type: direct, args: Green-C#green-b }
  sysctls:
  - sysctl: net.ipv6.conf.all.disable_ipv6=0
  - sysctl: net.ipv6.conf.all.forwarding=1
- name: Green-C
  image: sabaniki/frr:latest
  interfaces:
  - { name: green-b, type: direct, args: Green-B#green-c }
  - { name: green-a, type: direct, args: Green-A#green-c }
  sysctls:
  - sysctl: net.ipv6.conf.all.disable_ipv6=0
  - sysctl: net.ipv6.conf.all.forwarding=1

node_configs:
- name: Blue-A
  cmds:
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " bgp router-id 10.64.60.1"
      -c " no bgp ebgp-requires-policy"
      -c " no bgp default ipv4-unicast"
      -c " bgp confederation identifier 65000"
      -c " bgp confederation peers 64501 64502 64503 64601"
      -c " neighbor BB peer-group"
      -c " neighbor BB remote-as 64600"
      -c " neighbor blue-b interface peer-group BB"
      -c " neighbor blue-c interface peer-group BB"
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " address-family ipv6 unicast"
      -c "  network 2001:db8:6500::/48"
      -c "  neighbor BB activate"
      -c "  neighbor BB next-hop-self"
      -c "  neighbor BB soft-reconfiguration inbound"

- name: Blue-B
  cmds:
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " bgp router-id 10.64.60.2"
      -c " no bgp ebgp-requires-policy"
      -c " no bgp default ipv4-unicast"
      -c " bgp confederation identifier 65000"
      -c " bgp confederation peers 64501 64502 64503 64601"
      -c " neighbor BB peer-group"
      -c " neighbor BB remote-as 64600"
      -c " neighbor blue-a interface peer-group BB"
      -c " neighbor blue-c interface peer-group BB"
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " address-family ipv6 unicast"
      -c "  network 2001:db8:6500::/48"
      -c "  neighbor BB activate"
      -c "  neighbor BB next-hop-self"
      -c "  neighbor BB soft-reconfiguration inbound"

- name: Blue-C
  cmds:
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " bgp router-id 10.64.60.3"
      -c " no bgp ebgp-requires-policy"
      -c " no bgp default ipv4-unicast"
      -c " bgp confederation identifier 65000"
      -c " bgp confederation peers 64501 64502 64503 64601"
      -c " neighbor BB peer-group"
      -c " neighbor BB remote-as 64600"
      -c " neighbor blue-b interface peer-group BB"
      -c " neighbor blue-a interface peer-group BB"
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " address-family ipv6 unicast"
      -c "  network 2001:db8:6500::/48"
      -c "  neighbor BB activate"
      -c "  neighbor BB next-hop-self"
      -c "  neighbor BB soft-reconfiguration inbound"
      
- name: Green-A
  cmds:
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " bgp router-id 10.64.61.1"
      -c " no bgp ebgp-requires-policy"
      -c " no bgp default ipv4-unicast"
      -c " bgp confederation identifier 65000"
      -c " bgp confederation peers 64501 64502 64503 64601"
      -c " neighbor BB peer-group"
      -c " neighbor BB remote-as 64600"
      -c " neighbor green-b interface peer-group BB"
      -c " neighbor green-c interface peer-group BB"
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " address-family ipv6 unicast"
      -c "  network 2001:db8:6500::/48"
      -c "  neighbor BB activate"
      -c "  neighbor BB next-hop-self"
      -c "  neighbor BB soft-reconfiguration inbound"

- name: Green-B
  cmds:
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " bgp router-id 10.64.61.2"
      -c " no bgp ebgp-requires-policy"
      -c " no bgp default ipv4-unicast"
      -c " bgp confederation identifier 65000"
      -c " bgp confederation peers 64501 64502 64503 64601"
      -c " neighbor BB peer-group"
      -c " neighbor BB remote-as 64600"
      -c " neighbor green-a peer-group BB"
      -c " neighbor green-c peer-group BB"
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " address-family ipv6 unicast"
      -c "  network 2001:db8:6500::/48"
      -c "  neighbor BB activate"
      -c "  neighbor BB next-hop-self"
      -c "  neighbor BB soft-reconfiguration inbound"

- name: Green-C
  cmds:
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " bgp router-id 10.64.61.3"
      -c " no bgp ebgp-requires-policy"
      -c " no bgp default ipv4-unicast"
      -c " bgp confederation identifier 65000"
      -c " bgp confederation peers 64501 64502 64503 64601"
      -c " neighbor BB peer-group"
      -c " neighbor BB remote-as 64600"
      -c " neighbor green-a peer-group BB"
      -c " neighbor green-b peer-group BB"
  - cmd: >-
      vtysh -c "conf t"
      -c "router bgp 64600"
      -c " address-family ipv6 unicast"
      -c "  network 2001:db8:6500::/48"
      -c "  neighbor BB activate"
      -c "  neighbor BB next-hop-self"
      -c "  neighbor BB soft-reconfiguration inbound"